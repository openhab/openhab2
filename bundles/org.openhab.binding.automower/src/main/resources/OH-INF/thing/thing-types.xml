<?xml version="1.0" encoding="UTF-8"?>
<thing:thing-descriptions bindingId="automower"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:thing="https://openhab.org/schemas/thing-description/v1.0.0"
	xsi:schemaLocation="https://openhab.org/schemas/thing-description/v1.0.0 https://openhab.org/schemas/thing-description-1.0.0.xsd">

	<!-- Automower Bridge Thing Type -->
	<bridge-type id="bridge">
		<label>Automower Connect Bridge</label>
		<description>The bridge to communicate with the Automower Connect API</description>

		<config-description>
			<parameter name="appKey" type="text" required="true">
				<label>Application Key</label>
				<description>The Application Key is required to communicate with the Automower Connect API at
					https://developer.husqvarnagroup.cloud/. It can be obtained by
					registering an Application on the Husqvarna Website.
					This application also needs to be connected to the
					"Authentication API" and the "Automower Connect API"</description>
			</parameter>
			<parameter name="appSecret" type="text" required="true">
				<label>Application Secret</label>
				<description>The Application Secret is required to communicate with the Automower Connect API at
					https://developer.husqvarnagroup.cloud/. It can be obtained by
					registering an Application on the Husqvarna Website.</description>
			</parameter>
			<parameter name="pollingInterval" type="integer" required="false" unit="s">
				<label>Polling Interval</label>
				<default>3600</default>
				<description>How often the available automowers should be queried in seconds</description>
			</parameter>
		</config-description>

	</bridge-type>

	<!-- Automower Thing Type -->
	<thing-type id="automower">
		<supported-bridge-type-refs>
			<bridge-type-ref id="bridge"/>
		</supported-bridge-type-refs>

		<label>Automower</label>
		<description>An automatic lawn mower</description>

		<channels>
			<!-- Status -->
			<channel id="name" typeId="nameType"/>
			<channel id="mode" typeId="modeType"/>
			<channel id="activity" typeId="activityType"/>
			<channel id="inactive-reason" typeId="inactiveReasonType"/>
			<channel id="state" typeId="stateType"/>
			<channel id="last-update" typeId="lastUpdateType"/>
			<channel id="battery" typeId="system.battery-level"/>
			<channel id="error-code" typeId="errorCodeType"/>
			<channel id="error-timestamp" typeId="errorTimestampType"/>
			<channel id="error-confirmable" typeId="errorConfirmableType"/>
			<channel id="planner-next-start" typeId="plannerNextStartTimestampType"/>
			<channel id="planner-override-action" typeId="plannerOverrideActionType"/>
			<channel id="planner-restricted-reason" typeId="plannerRestrictedReasonType"/>
			<channel id="planner-external-reason" typeId="plannerExternalReasonType"/>
			<channel id="calendar-tasks" typeId="calendarTasksType"/>
			<channel id="setting-cutting-height" typeId="settingCuttingHeightType"/>
			<channel id="setting-headlight-mode" typeId="settingHeadlightModeType"/>
			<channel id="stat-cutting-blade-usage-time" typeId="statCuttingBladeUsageTimeType"/>
			<channel id="stat-number-of-charging-cycles" typeId="statNumberOfChargingCyclesType"/>
			<channel id="stat-number-of-collisions" typeId="statNumberOfCollisionsType"/>
			<channel id="stat-total-charging-time" typeId="statTotalChargingTimeType"/>
			<channel id="stat-total-cutting-time" typeId="statTotalCuttingTimeType"/>
			<channel id="stat-total-driven-distance" typeId="statTotalDrivenDistanceType"/>
			<channel id="stat-total-running-time" typeId="statTotalRunningTimeType"/>
			<channel id="stat-total-searching-time" typeId="statTotalSearchingTimeType"/>
			<!-- Commands -->
			<channel id="start" typeId="start"/>
			<channel id="resume_schedule" typeId="resumeSchedule"/>
			<channel id="pause" typeId="pause"/>
			<channel id="park" typeId="park"/>
			<channel id="park_until_next_schedule" typeId="parkUntilNextSchedule"/>
			<channel id="park_until_further_notice" typeId="parkUntilFurtherNotice"/>

			<!-- Positions -->
			<channel id="last-position" typeId="positionType">
				<description>Last Position</description>
			</channel>
			<channel id="position01" typeId="positionType"/>
			<channel id="position02" typeId="positionType"/>
			<channel id="position03" typeId="positionType"/>
			<channel id="position04" typeId="positionType"/>
			<channel id="position05" typeId="positionType"/>
			<channel id="position06" typeId="positionType"/>
			<channel id="position07" typeId="positionType"/>
			<channel id="position08" typeId="positionType"/>
			<channel id="position09" typeId="positionType"/>
			<channel id="position10" typeId="positionType"/>
			<channel id="position11" typeId="positionType"/>
			<channel id="position12" typeId="positionType"/>
			<channel id="position13" typeId="positionType"/>
			<channel id="position14" typeId="positionType"/>
			<channel id="position15" typeId="positionType"/>
			<channel id="position16" typeId="positionType"/>
			<channel id="position17" typeId="positionType"/>
			<channel id="position18" typeId="positionType"/>
			<channel id="position19" typeId="positionType"/>
			<channel id="position20" typeId="positionType"/>
			<channel id="position21" typeId="positionType"/>
			<channel id="position22" typeId="positionType"/>
			<channel id="position23" typeId="positionType"/>
			<channel id="position24" typeId="positionType"/>
			<channel id="position25" typeId="positionType"/>
			<channel id="position26" typeId="positionType"/>
			<channel id="position27" typeId="positionType"/>
			<channel id="position28" typeId="positionType"/>
			<channel id="position29" typeId="positionType"/>
			<channel id="position30" typeId="positionType"/>
			<channel id="position31" typeId="positionType"/>
			<channel id="position32" typeId="positionType"/>
			<channel id="position33" typeId="positionType"/>
			<channel id="position34" typeId="positionType"/>
			<channel id="position35" typeId="positionType"/>
			<channel id="position36" typeId="positionType"/>
			<channel id="position37" typeId="positionType"/>
			<channel id="position38" typeId="positionType"/>
			<channel id="position39" typeId="positionType"/>
			<channel id="position40" typeId="positionType"/>
			<channel id="position41" typeId="positionType"/>
			<channel id="position42" typeId="positionType"/>
			<channel id="position43" typeId="positionType"/>
			<channel id="position44" typeId="positionType"/>
			<channel id="position45" typeId="positionType"/>
			<channel id="position46" typeId="positionType"/>
			<channel id="position47" typeId="positionType"/>
			<channel id="position48" typeId="positionType"/>
			<channel id="position49" typeId="positionType"/>
			<channel id="position50" typeId="positionType"/>


			<!-- Stayout Zones -->
			<channel id="dirty" typeId="zoneDirtyType"/>
			<channel id="zone01-id" typeId="zoneIdType"/>
			<channel id="zone01-name" typeId="zoneNameType"/>
			<channel id="zone01-enabled" typeId="zoneEnabledType"/>
			<channel id="zone02-id" typeId="zoneIdType"/>
			<channel id="zone02-name" typeId="zoneNameType"/>
			<channel id="zone02-enabled" typeId="zoneEnabledType"/>
			<channel id="zone03-id" typeId="zoneIdType"/>
			<channel id="zone03-name" typeId="zoneNameType"/>
			<channel id="zone03-enabled" typeId="zoneEnabledType"/>
			<channel id="zone04-id" typeId="zoneIdType"/>
			<channel id="zone04-name" typeId="zoneNameType"/>
			<channel id="zone04-enabled" typeId="zoneEnabledType"/>
			<channel id="zone05-id" typeId="zoneIdType"/>
			<channel id="zone05-name" typeId="zoneNameType"/>
			<channel id="zone05-enabled" typeId="zoneEnabledType"/>
			<channel id="zone06-id" typeId="zoneIdType"/>
			<channel id="zone06-name" typeId="zoneNameType"/>
			<channel id="zone06-enabled" typeId="zoneEnabledType"/>
			<channel id="zone07-id" typeId="zoneIdType"/>
			<channel id="zone07-name" typeId="zoneNameType"/>
			<channel id="zone07-enabled" typeId="zoneEnabledType"/>
			<channel id="zone08-id" typeId="zoneIdType"/>
			<channel id="zone08-name" typeId="zoneNameType"/>
			<channel id="zone08-enabled" typeId="zoneEnabledType"/>
			<channel id="zone09-id" typeId="zoneIdType"/>
			<channel id="zone09-name" typeId="zoneNameType"/>
			<channel id="zone09-enabled" typeId="zoneEnabledType"/>
			<channel id="zone19-id" typeId="zoneIdType"/>
			<channel id="zone10-name" typeId="zoneNameType"/>
			<channel id="zone10-enabled" typeId="zoneEnabledType"/>

			<!-- Work Areas -->
			<channel id="workareas01-id" typeId="workareasIdType"/>
			<channel id="workareas01-name" typeId="workareasNameType"/>
			<channel id="workareas01-cutting-height" typeId="workareasCuttingHeightType"/>
			<channel id="workareas01-enabled" typeId="workareasEnabledType"/>
			<channel id="workareas01-progress" typeId="workareasProgressType"/>
			<channel id="workareas01-last-time-completed" typeId="workareasLasTimeCompletedType"/>
		</channels>

		<properties>
			<property name="mowerId">N/A</property>
			<property name="mowerName">N/A</property>
			<property name="mowerModel">N/A</property>
			<property name="mowerSerialNumber">N/A</property>
			<property name="mowerCanConfirmError">N/A</property>
			<property name="mowerHasHeadlights">N/A</property>
			<property name="mowerHasPosition">N/A</property>
			<property name="mowerHasStayOutZones">N/A</property>
			<property name="mowerHasWorkAreas">N/A</property>
		</properties>

		<config-description>
			<parameter name="mowerId" type="text" required="true">
				<label>Automower Id</label>
				<description>The Id of an automower as used by the Automower Connect Api to identify a mower</description>
			</parameter>
			<parameter name="pollingInterval" type="integer" required="false" unit="s">
				<label>Polling Interval</label>
				<default>600</default>
				<description>How often the current automower state should be polled in seconds</description>
			</parameter>
		</config-description>

	</thing-type>


	<channel-type id="nameType">
		<item-type>String</item-type>
		<label>Automower Name</label>
		<description>The channel providing the automower name</description>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="modeType">
		<item-type>String</item-type>
		<label>Mode</label>
		<description>The current mode</description>
		<state readOnly="true">
			<options>
				<option value="MAIN_AREA">Main Area</option>
				<option value="SECONDARY_AREA">Secondary Area</option>
				<option value="HOME">Home</option>
				<option value="DEMO">Demo</option>
				<option value="UNKNOWN">Unknown</option>
			</options>
		</state>
	</channel-type>

	<channel-type id="activityType">
		<item-type>String</item-type>
		<label>Activity</label>
		<description>The current activity</description>
		<state readOnly="true">
			<options>
				<option value="UNKNOWN">Unknown</option>
				<option value="NOT_APPLICABLE">N/A</option>
				<option value="MOWING">Mowing</option>
				<option value="GOING_HOME">Returning to charging station</option>
				<option value="CHARGING">Charging</option>
				<option value="LEAVING">Leaving charging station</option>
				<option value="PARKED_IN_CS">Parked in charging station</option>
				<option value="STOPPED_IN_GARDEN">Stopped in garden</option>
			</options>
		</state>
	</channel-type>

	<channel-type id="inactiveReasonType">
		<item-type>String</item-type>
		<label>Inactive Reason</label>
		<description>The current reason for being inactive</description>
		<state readOnly="true">
			<options>
				<option value="NONE">No inactive reason</option>
				<option value="PLANNING">The mower is planning a path or a work area</option>
				<option value="SEARCHING_FOR_SATELLITES">Waiting for fix when using EPOS</option>
			</options>
		</state>
	</channel-type>

	<channel-type id="stateType">
		<item-type>String</item-type>
		<label>State</label>
		<description>The current state</description>
		<state readOnly="true">
			<options>
				<option value="UNKNOWN">Unknown</option>
				<option value="NOT_APPLICABLE">N/A</option>
				<option value="PAUSED">Paused by user</option>
				<option value="IN_OPERATION">Working</option>
				<option value="WAIT_UPDATING">Downloading new firmware</option>
				<option value="WAIT_POWER_UP">Booting mower</option>
				<option value="RESTRICTED_NONE">Waiting</option>
				<option value="RESTRICTED_WEEK_SCHEDULE">Restricted by week schedule</option>
				<option value="RESTRICTED_PARK_OVERRIDE">Forced to park</option>
				<option value="RESTRICTED_SENSOR">Restricted by sensor</option>
				<option value="RESTRICTED_DAILY_LIMIT">Restricted by daily limit</option>
				<option value="OFF">Off</option>
				<option value="STOPPED">Stopped- Manual intervention required</option>
				<option value="ERROR">Error</option>
				<option value="FATAL_ERROR">Fatal error</option>
				<option value="ERROR_AT_POWER_UP">Boot error</option>
			</options>
		</state>
	</channel-type>

	<channel-type id="lastUpdateType">
		<item-type>DateTime</item-type>
		<label>Last Update</label>
		<description>The time when the mower sent the last update</description>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="batteryType">
		<item-type>Number:Dimensionless</item-type>
		<label>Battery</label>
		<description>The battery level of the mower at the time of last update</description>
		<state readOnly="true" pattern="%d %%"/>
	</channel-type>

	<channel-type id="errorCodeType">
		<item-type>Number</item-type>
		<label>Error Code</label>
		<description>The error code at the time of last update</description>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="errorTimestampType">
		<item-type>DateTime</item-type>
		<label>Error Time</label>
		<description>The time when the error occurred</description>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="errorConfirmableType">
		<item-type>Switch</item-type>
		<label>Error Confirmable</label>
		<description>If the mower has an Error Code this attribute states if the error is confirmable</description>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="plannerNextStartTimestampType">
		<item-type>DateTime</item-type>
		<label>Next Auto Start</label>
		<description>The channel providing the time for the next auto start. If the mower is charging then the value is the
			estimated time when it will be leaving the charging station. If the mower is about to start now, the value is NULL.</description>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="plannerOverrideActionType">
		<item-type>String</item-type>
		<label>Override Action</label>
		<description>The channel providing an action that overrides current planner operation.</description>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="plannerRestrictedReasonType">
		<item-type>String</item-type>
		<label>Restricted Reason</label>
		<description>The channel providing an reason that restrics current planner operation.</description>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="plannerExternalReasonType">
		<item-type>Number</item-type>
		<label>External Reason</label>
		<description>The channel providing an external reason that restrics current planner operation.</description>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="calendarTasksType">
		<item-type>String</item-type>
		<label>Planner Info JSON</label>
		<description>The channel providing a JSON with the information about the planner tasks.</description>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="settingCuttingHeightType">
		<item-type>Number</item-type>
		<label>Cutting Height</label>
		<description>Prescaled cutting height, Range: 1-9</description>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="settingHeadlightModeType">
		<item-type>String</item-type>
		<label>Headlight Mode</label>
		<description>Information about headlights</description>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="statCuttingBladeUsageTimeType">
		<item-type>Number:Time</item-type>
		<label>Cutting Blade Usage Time</label>
		<description>The time since the last reset of the cutting blade usage counter</description>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="statNumberOfChargingCyclesType">
		<item-type>Number</item-type>
		<label>Number of Charging Cycles</label>
		<description>Number of charging cycles</description>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="statNumberOfCollisionsType">
		<item-type>Number</item-type>
		<label>Number of Collisions</label>
		<description>The total number of collisions</description>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="statTotalChargingTimeType">
		<item-type>Number:Time</item-type>
		<label>Total Charging Time</label>
		<description>Total charging time</description>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="statTotalCuttingTimeType">
		<item-type>Number:Time</item-type>
		<label>Total Cutting Time</label>
		<description>Total cutting time</description>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="statTotalDrivenDistanceType">
		<item-type>Number:Length</item-type>
		<label>Total Driven Distance</label>
		<description>Total driven distance</description>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="statTotalRunningTimeType">
		<item-type>Number:Time</item-type>
		<label>Total Running Time</label>
		<description>The total running time (the wheel motors have been running)</description>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="statTotalSearchingTimeType">
		<item-type>Number:Time</item-type>
		<label>Total Searching Time</label>
		<description>The total searching time</description>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="positionType">
		<item-type>Location</item-type>
		<label>GPS Position</label>
		<description>The channel providing a waypoint of the mower's activity.</description>
		<state readOnly="true"/>
	</channel-type>

	<!-- Stayout Zones -->

	<channel-type id="zoneDirtyType">
		<item-type>Switch</item-type>
		<label>Stayout zones Dirty Flag</label>
		<description>If the stay-out zones are synchronized with the Husqvarna cloud. If the map is dirty you can not enable
			or disable a stay-out zone.</description>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="zoneIdType">
		<item-type>String</item-type>
		<label>Stayout Zone Id</label>
		<description>Id of the Stayout zone</description>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="zoneNameType">
		<item-type>String</item-type>
		<label>Stayout Zone Name</label>
		<description>The name of the Stayout zone</description>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="zoneEnabledType">
		<item-type>Switch</item-type>
		<label>Stayout Zone Enabled</label>
		<description>If the Stayout zone is enabled, the Automower® will not access the zone</description>
		<state readOnly="true"/>
	</channel-type>

	<!-- Work Areas -->
	<channel-type id="workareasIdType">
		<item-type>Number</item-type>
		<label>Work Area Id</label>
		<description>Id of the Work Area</description>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="workareasNameType">
		<item-type>String</item-type>
		<label>Work Area Name</label>
		<description>Name of the work area</description>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="workareasCuttingHeightType">
		<item-type>Number:Dimensionless</item-type>
		<label>Cutting height in percent</label>
		<description>Cutting height in percent. 0-100</description>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="workareasEnabledType">
		<item-type>Switch</item-type>
		<label>Work Area Enabled</label>
		<description>If the work area is enabled or disabled</description>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="workareasProgressType">
		<item-type>Number:Dimensionless</item-type>
		<label>Work Area Progress</label>
		<description>The progress on a work area. EPOS mowers and systematic mowing work areas only.</description>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="workareasLasTimeCompletedType">
		<item-type>DateTime</item-type>
		<label>Stayout Zone Id</label>
		<description>Timestamp when the work area was last completed. EPOS mowers and systematic mowing work areas only.</description>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="start">
		<item-type>Number</item-type>
		<label>Start with Duration</label>
		<description>Start for a duration in minutes</description>
		<state pattern="%d min" min="1" max="1440" step="1"/>
	</channel-type>

	<channel-type id="resumeSchedule">
		<item-type>Switch</item-type>
		<label>Resume Schedule</label>
		<description>Resume schedule</description>
	</channel-type>

	<channel-type id="pause">
		<item-type>Switch</item-type>
		<label>Pause</label>
		<description>Pause the mower now until manual resume</description>
	</channel-type>

	<channel-type id="park">
		<item-type>Number</item-type>
		<label>Park with Duration</label>
		<description>Park for a duration in minutes</description>
		<state pattern="%d min" min="1" max="1440" step="1"/>
	</channel-type>

	<channel-type id="parkUntilNextSchedule">
		<item-type>Switch</item-type>
		<label>Park Until Next Schedule</label>
		<description>Park until next schedule</description>
	</channel-type>

	<channel-type id="parkUntilFurtherNotice">
		<item-type>Switch</item-type>
		<label>Park and Pause the Schedule</label>
		<description>Park and pause the mower schedule until manual resume</description>
	</channel-type>

</thing:thing-descriptions>
